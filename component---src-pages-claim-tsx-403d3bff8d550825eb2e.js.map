{"version":3,"file":"component---src-pages-claim-tsx-403d3bff8d550825eb2e.js","mappings":"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","sources":["webpack://non-fungible-cup/./src/components/cshirts/cshirtPreview.tsx","webpack://non-fungible-cup/./src/pages/claim.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {Link} from 'gatsby';\n\nconst CShirtsPreview = ({id, url, imgpath, collection} : {id:string, url:string, imgpath:string, collection:string}) => {\n    return (        \n        <div className=\"img-box\">            \n            <img src={imgpath + id + \".png\"} alt={collection + ' #' + id} />\n            <div className=\"cshirt-info\">\n                <p className=\"chsirt-number\">#{id}</p>\n            </div>\n        </div>\n    );\n};\n\nexport default CShirtsPreview;","import React, { useState } from 'react';\nimport Layout from '../components/layout';\nimport InnerPageTitle from '../components/utils/inner-page-title';\nimport {Link} from 'gatsby';\nimport { BigNumber, ethers } from \"ethers\";\nimport MetamaskIcon from '../assets/images/metamask.png';\nimport Constants from '../utils/constants';\nimport CShirtsPreview from '../components/cshirts/cshirtPreview';\n\ndeclare var window: any;\nvar provider: any;\nvar mobile: boolean;\nvar isWindowEth: boolean = false;\n\nif(typeof window !== 'undefined' && window.ethereum) {\n    isWindowEth = true;\n    provider =  new ethers.providers.Web3Provider(window.ethereum);\n    window.ethereum.on(\"chainChanged\", (chainId:any) => {   \n        window.location.reload();\n    });\n}\nif(typeof window !== 'undefined') {\n    var match = window.matchMedia(\"(max-width: 991px)\");\n    mobile = match.matches;\n    match.addListener(() => {\n        mobile = match.matches;\n    });\n}\n\ntype CShirt = {\n    id: number;\n}\n\ntype Tournament = {\n    name: string;\n    tokens: CShirt[];\n}\n\nconst ClaimPage = () => { \n    const [walletAddress, setWalletAddress] = useState('');\n    const [isConnected, setIsConnected] = useState(false);\n    const [connectionMessage, setConnectionMessage] = useState('');\n    const [cshirts, setCShirts] = useState<CShirt[]>([]);\n    const [tournaments, setTournaments] = useState<Tournament[]>([]);\n    const [isCheckingWallet, setIsCheckingWallet] = useState(false);\n\n    let connectWallet;\n    if(typeof window !== 'undefined')\n    {\n        connectWallet = (async() => {\n            if(window.ethereum) {\n                try {\n                    setIsCheckingWallet(true);\n                    await provider.send('eth_requestAccounts', []);\n                    const signer = provider.getSigner();\n                    const address = await signer.getAddress();      \n                    if(address) {\n                        setWalletAddress(address);\n                        setIsConnected(true);\n                        setConnectionMessage(\"\");\n                        \n                            /* var walletCshirts:CShirt[] = [];\n                            const contract = new ethers.Contract(Constants.CSHIRTS_CONTRACTADDRESS, Constants.CSHIRTS_CONTRACTABI, signer); \n                            const cshirts_tokens = await contract.tokensOfOwner(address);\n                            cshirts_tokens.forEach((c_token:BigNumber) => {\n                                walletCshirts.push({id: c_token.toNumber()});\n                            });\n                            setCShirts(walletCshirts);\n\n                            var walletTournaments:Tournament[] = [];\n                            Constants.TOURNAMENTS.forEach(async (tournament:any) => {\n                                if(tournament.contractaddress != \"\") {\n                                    const contract_tournament = new ethers.Contract(tournament.contractaddress, Constants.TOURNAMENTS_CONTRACTABI, signer); \n                                    const tournament_tokens = await contract_tournament.tokensOfOwner(address);                                \n                                    if(tournament_tokens-length > 0) {\n                                        var tournamentObj:Tournament = { name: tournament.name, tokens: []};\n                                        tournament_tokens.forEach((t_token:BigNumber) => {\n                                            tournamentObj.tokens.push({id: t_token.toNumber()});\n                                        });\n                                        walletTournaments.push(tournamentObj);\n                                    }  \n                                }                      \n                            });\n                            setTournaments(walletTournaments); */\n                        \n                        setIsCheckingWallet(false);\n                    }    \n                    else {\n                        setWalletAddress(\"\");\n                        setIsCheckingWallet(false);\n                    }\n                } \n                catch(err) {\n                    setConnectionMessage(err.message);\n                    setIsCheckingWallet(false);\n                }    \n            } else {\n                setConnectionMessage(\"Please install Metamask\");\n                setIsCheckingWallet(false);\n            }\n        });\n    }\n    const PageLayout = <Layout pageTitle=\"Non Fungible Cup: Claim your wins\" container=\"inner-page\">\n        <InnerPageTitle title=\"Claim wins\" subtitle=\"Connect your wallet and check you wins\" />\n        <section className=\"tf-section tf-item tf-claim\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className={mobile == false || isWindowEth ? \"col-md-12 center\" : \"hide\"}>\n                        <button className={isConnected == true ? \"hide\" : \"tf-button btn-effect active\"} onClick={connectWallet}>\n                            <span className=\"boder-fade\"></span>          \n                            <span className=\"effect\"><img src={MetamaskIcon} className=\"metamaskIcon\" />Connect your wallet</span>\n                        </button><br />                         \n                        <span><strong>{connectionMessage}</strong></span><br />\n                    </div>\n                    <div className={mobile == true && !isWindowEth ? \"col-md-12 center\" : \"hide\"}>\n                        <a href={Constants.METAMASK_MOBILE_CLAIMURL} className={isConnected == true ? \"hide\" : \"tf-button btn-effect active\"}>\n                            <span className=\"boder-fade\"></span>          \n                            <span className=\"effect\"><img src={MetamaskIcon} className=\"metamaskIcon\" />Open Metamask</span>\n                        </a>                 \n                        <span><strong>{connectionMessage}</strong></span><br />\n                    </div>             \n                </div>  \n                <div className={isConnected ? \"row\" : \"hide\"}>\n                    <div className=\"col-md-12 center\">\n                        <h4>Your C-Shirts</h4>\n                        <div className={isConnected == true && isCheckingWallet == false ? \"wallet\" : \"hide\"}>Wallet connected: {walletAddress}</div>\n                        <div className={isConnected == true && isCheckingWallet == false && cshirts.length == 0 && tournaments.length == 0 ? \"claim-container\" : \"hide\"}>\n                            <div className=\"claim-container toUpper nodata\">No C-Shirts found in your wallet</div>\n                            <div>\n                                <Link className=\"tf-button st2 btn-effect\" to=\"/cshirts\">\n                                    <span className=\"boder-fade\"></span>\n                                    <span className=\"effect\">Get a C-Shirt</span>\n                                </Link>\n                            </div>\n                        </div>\n                        <div className={isConnected == true && isCheckingWallet == false && (cshirts.length > 0 || tournaments.length > 0) ? \"claim-container\" : \"hide\"}>\n                            <div className=\"wrap-fx\">\n                                <h6>C-Shirts</h6>\n                                {cshirts.map((shirt:any) => (\n                                    <div className=\"fl-item\" key={shirt.id}>\n                                        <CShirtsPreview id={shirt.id} url=\"/cshirts/\" imgpath=\"/images/cshirts/72x72/\" collection=\"C-Shirts\" />\n                                    </div>\n                                ))} \n                            </div>\n                            <div className=\"wrap-fx\">                                \n                                {tournaments.map((t:any) => (\n                                    <div key={t.name}>\n                                        <h6>{t.name}</h6>\n                                        {t.tokens.map((c:any) => (\n                                            <div className=\"fl-item\" key={c.id}>\n                                                <CShirtsPreview id={c.id} url=\"/cshirts/\" imgpath=\"/images/cshirts/72x72/\" collection=\"C-Shirts\" />\n                                            </div>\n                                        ))}\n                                    </div>\n                                ))} \n                            </div>\n                        </div>\n                    </div>\n                </div>              \n            </div>\n        </section>\n    </Layout>\n    return(\n        PageLayout\n    );\n};\n\nexport default ClaimPage;"],"names":["id","imgpath","url","collection","React","className","src","alt","provider","mobile","isWindowEth","window","ethereum","ethers","on","chainId","location","reload","match","matchMedia","matches","addListener","connectWallet","useState","walletAddress","setWalletAddress","isConnected","setIsConnected","connectionMessage","setConnectionMessage","cshirts","tournaments","isCheckingWallet","setIsCheckingWallet","_context","send","signer","getSigner","getAddress","address","message","Layout","pageTitle","container","InnerPageTitle","title","subtitle","onClick","MetamaskIcon","href","Constants","length","Link","to","map","shirt","key","CShirtsPreview","t","name","tokens","c"],"sourceRoot":""}