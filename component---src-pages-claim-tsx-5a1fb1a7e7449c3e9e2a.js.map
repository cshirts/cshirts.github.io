{"version":3,"file":"component---src-pages-claim-tsx-5a1fb1a7e7449c3e9e2a.js","mappings":"2NAQMA,EAAW,IAAIC,EAAAA,EAA8BC,OAAOC,UA+E1D,UA7EkB,WACd,IAEA,GAA0CC,EAAAA,EAAAA,UAAS,IAA5CC,EAAP,KAAsBC,EAAtB,KACA,GAAsCF,EAAAA,EAAAA,WAAS,GAAxCG,EAAP,KAAoBC,EAApB,KACA,GAAkDJ,EAAAA,EAAAA,UAAS,IAApDK,EAAP,KAA0BC,EAA1B,KACA,GAA8BN,EAAAA,EAAAA,UAAS,IAAhCO,EAAP,KAEMC,GAFN,KAEmB,mCAAI,4FAChBV,OAAOC,SADS,0CAGTH,EAASa,KAAK,sBAAuB,IAH5B,OAAAC,OAITC,EAASf,EAASgB,YAJTF,EAAAA,KAAAA,EAKOC,EAAOE,aALd,OAKTC,EALS,OAOTC,EAAM,CACR,mFACA,iDAGDD,GACCZ,EAAiBY,GACjBV,GAAe,GACA,IAAIP,EAAAA,GAtBA,GAsBwCkB,EAAKJ,IAIlET,EAAiB,IAnBJQ,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,GAAAA,EAAAA,KAAAA,GAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAuBfJ,EAAqBI,EAAAA,GAAIM,SAvBV,gCA2BfV,EAAqB,2BA3BN,0DAAJ,sDAgEnB,OAlCmBW,EAAAA,cAACC,EAAAA,EAAD,CAAQC,UAAU,oCAAoCC,UAAU,cAC/EH,EAAAA,cAACI,EAAAA,EAAD,CAAgBC,MAAM,aAAaC,SAAS,2CAC5CN,EAAAA,cAAAA,UAAAA,CAASO,UAAU,+BACfP,EAAAA,cAAAA,MAAAA,CAAKO,UAAU,aACXP,EAAAA,cAAAA,MAAAA,CAAKO,UAAU,OACXP,EAAAA,cAAAA,MAAAA,CAAKO,UAAU,oBACXP,EAAAA,cAAAA,IAAAA,CAAGQ,KAAK,IAAID,UAAWrB,EAAc,OAAS,uBAAwBuB,QAASlB,GAC3ES,EAAAA,cAAAA,OAAAA,CAAMO,UAAU,eAChBP,EAAAA,cAAAA,OAAAA,CAAMO,UAAU,UAAhB,wBAEJP,EAAAA,cAAAA,OAAAA,KAAMA,EAAAA,cAAAA,SAAAA,KAASZ,IAAkCY,EAAAA,cAAAA,KAAAA,QAGzDA,EAAAA,cAAAA,MAAAA,CAAKO,UAAWrB,EAAc,MAAQ,QAClCc,EAAAA,cAAAA,MAAAA,CAAKO,UAAU,oBACXP,EAAAA,cAAAA,KAAAA,KAAAA,iBACAA,EAAAA,cAAAA,MAAAA,CAAKO,UAAWrB,EAAc,SAAW,QAAzC,qBAAoEF,GACpEgB,EAAAA,cAAAA,MAAAA,CAAKO,UAAWrB,GAAiC,GAAlBI,EAAQoB,OAAc,kBAAoB,QACrEV,EAAAA,cAAAA,MAAAA,CAAKO,UAAU,kCAAf,oCACAP,EAAAA,cAAAA,MAAAA,KACIA,EAAAA,cAACW,EAAAA,KAAD,CAAMJ,UAAU,2BAA2BK,GAAG,YAC1CZ,EAAAA,cAAAA,OAAAA,CAAMO,UAAU,eAChBP,EAAAA,cAAAA,OAAAA,CAAMO,UAAU,UAAhB,sCAIZP,EAAAA,cAAAA,MAAAA,CAAKO,UAAWrB,GAAeI,EAAQoB,OAAS,EAAI,kBAAoB","sources":["webpack://non-fungible-cup/./src/pages/claim.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../components/layout';\nimport InnerPageTitle from '../components/utils/inner-page-title';\nimport {Link} from 'gatsby';\nimport CShirtsABI from '../assets/contracts/cshirts.json';\nimport { ethers } from \"ethers\";\n\ndeclare var window: any;\nconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\nconst ClaimPage = () => { \n    const cshirtsContractAddress = ''; //todo: mettere l'indirizzo del contratto\n\n    const [walletAddress, setWalletAddress] = useState('');\n    const [isConnected, setIsConnected] = useState(false);\n    const [connectionMessage, setConnectionMessage] = useState('');\n    const [cshirts, setCShirts] = useState([]);\n\n    const connectWallet = (async() => {\n        if(window.ethereum) {\n          try {\n            await provider.send('eth_requestAccounts', []);\n            const signer = provider.getSigner();\n            const address = await signer.getAddress();\n            //todo: aggiungere il metodo per prendere gli alreadyMinted\n            const abi = [\n                \"function mintWaitlist(bytes calldata _signature, uint256 _amount) public payable\",\n                \"function mint(uint256 _amount) public payable\"\n              ];\n            \n            if(address) {\n                setWalletAddress(address);\n                setIsConnected(true);\n                var contract = new ethers.Contract(cshirtsContractAddress, abi, signer);\n                debugger;                \n            }    \n            else {\n              setWalletAddress('');\n            }\n          } \n          catch(err) {\n            setConnectionMessage(err.message);\n          }    \n        } \n        else {\n            setConnectionMessage(\"Please install Metamask\");\n        }\n      });\n    const PageLayout = <Layout pageTitle=\"Non Fungible Cup: Claim your wins\" container=\"inner-page\">\n        <InnerPageTitle title=\"Claim wins\" subtitle=\"Connect your wallet and check you wins\" />\n        <section className=\"tf-section tf-item tf-claim\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-md-12 center\">\n                        <a href=\"#\" className={isConnected ? \"hide\" : \"tf-button btn-effect\"} onClick={connectWallet}>\n                            <span className=\"boder-fade\"></span>          \n                            <span className=\"effect\">Connect your wallet</span>\n                        </a> \n                        <span><strong>{connectionMessage}</strong></span><br />\n                    </div>\n                </div>  \n                <div className={isConnected ? \"row\" : \"hide\"}>\n                    <div className=\"col-md-12 center\">\n                        <h4>Your C-Shirts</h4>\n                        <div className={isConnected ? \"wallet\" : \"hide\"}>Wallet connected: {walletAddress}</div>\n                        <div className={isConnected && cshirts.length == 0 ? \"claim-container\" : \"hide\"}>\n                            <div className=\"claim-container toUpper nodata\">No C-Shirts found in your wallet</div>\n                            <div>\n                                <Link className=\"tf-button st2 btn-effect\" to=\"/cshirts\">\n                                    <span className=\"boder-fade\"></span>\n                                    <span className=\"effect\">Get a C-Shirt and start playing</span>\n                                </Link>\n                            </div>\n                        </div>\n                        <div className={isConnected && cshirts.length > 0 ? \"claim-container\" : \"hide\"}>\n                            \n                        </div>\n                    </div>\n                </div>              \n            </div>\n        </section>\n    </Layout>\n    return(\n        PageLayout\n    );\n};\n\nexport default ClaimPage;"],"names":["provider","ethers","window","ethereum","useState","walletAddress","setWalletAddress","isConnected","setIsConnected","connectionMessage","setConnectionMessage","cshirts","connectWallet","send","_context","signer","getSigner","getAddress","address","abi","message","React","Layout","pageTitle","container","InnerPageTitle","title","subtitle","className","href","onClick","length","Link","to"],"sourceRoot":""}